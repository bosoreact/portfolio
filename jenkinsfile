// pipeline {
//     agent any
//     tools {
//         nodejs 'node installer 16.20' // Specify the desired Node.js version
//     }
//     stages {
//         stage('kill process'){
//             steps {
//                 nodejs('node installer 16.20') {
//                     sh 'kill $(lsof -t -i :3000)'
//                 }
//             }
//         }
//         stage('Check PATH') {
//             steps {
//                 script {
//                     // echo "PATH: ${env.PATH}  "
//                     echo "PATH:${sudo_psw}"
//                 }
//             }
//         }
//         stage('Build') {
//             steps {
//                 nodejs('node installer 16.20') {
//                     sh 'npm install'
//                     sh 'npm run build'
//                 }
//             }
//         }
//         stage('Test') {
//             steps {
//                 echo 'Testing..'
//             }
//         }
//         stage('Deploy') {
//             steps {
//                 echo 'Deploying....'
//             }
//         }
//         stage('Run'){
//             steps {
//                 // echo 'Running...${sudo-psw}'
//                  nodejs('node installer 16.20') {
//                     // sh ' npm start -p 80'
//                     sh ' npm start '
//                     // sh ' sudo -S npm start'
//                     // sh "sudo ${sudo_psw}"
//                     // echo "Sudo Password: ${sudo_psw}"
//                     // sh "echo ${sudo_psw} | sudo -S npm start"


//                  }
//             }
//         }
//     }
// }

pipeline {
    agent any
    stages {
        stage('build') {
            steps {
                echo 'building...'

                script {
                    docker.build("portfolio-image")
                }
            }
        }

        stage('deploy') {
            steps {
                echo 'docker scripts ;]...'
                sh "docker container rm -f portfolio-container || true"
                sh "docker run -d -p 3000:3000 --name portfolio-container portfolio-image"
            }
        }
    }
}